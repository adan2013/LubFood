{"version":3,"sources":["firebase/firebase.js","firebase/authorizationProgressFlag.js","firebase/UserContext.js","lubfoodlogo.png","views/LoginPage.js","components/NavMenu.js","components/Layout.js","config.js","components/CardTitle.js","views/CategoryBrowser.js","firebase/firestore/recipes.js","components/DataLoader.js","views/RecipeBrowser.js","components/ModalWindow.js","firebase/firestore/shoppingList.js","components/IngredientList.js","views/RecipePreview.js","hooks/useTimer.js","components/CookingPopupPanel.js","views/Cooking.js","components/NumberPicker.js","views/RecipeEditor.js","components/RecipeIngredientPanel.js","firebase/firestore/ingredients.js","views/IngredientEditor.js","components/RecipeStepPanel.js","views/StepEditor.js","views/ShoppingList.js","views/Search.js","views/IngredientBrowser.js","firebase/firestore/databaseExports.js","views/ProfilePage.js","routes.js","App.js","reportWebVitals.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","KEY_NAME","authorizationStart","window","localStorage","setItem","Date","toString","authorizationEnd","removeItem","UserContext","createContext","user","UserProvider","state","componentDidMount","auth","onAuthStateChanged","userAuth","firestore","collection","get","then","setState","catch","alert","Provider","value","this","props","children","Component","LoginForm","styled","div","LubFood","KeyIcon","FontAwesomeIcon","LoginButton","Button","ProgressLabel","AbortButton","signInWithGoogle","provider","GoogleAuthProvider","signInWithRedirect","err","LoginPage","authorized","useContext","authInProgress","getItem","to","src","logo","alt","variant","size","onClick","icon","faKey","NavContainer","NavItem","Link","items","faUtensils","name","path","faShoppingCart","faSearch","faCarrot","faUser","NavMenu","location","useLocation","map","item","className","pathname","indexOf","Container","Content","Layout","categories","code","ingredientUtils","label","min","max","step","Btn","onRight","SideButton","buttonObj","push","useHistory","link","defaultProps","CardTitle","leftButton","rightButton","ButtonGroup","CategoryButton","CategoryArrowIcon","CategoryBrowser","history","config","category","block","faChevronRight","RECIPES_COLL","STEPS_FIELD","INGREDIENTS_FIELD","getRecipe","recipeId","doc","recipe","data","getAllRecipes","docs","forEach","id","getRecipeField","fieldName","updateRecipeField","update","updateSteps","stepArray","updateIngredients","ingredientArray","DataLoader","viewer","loader","refreshFlag","noPreventEmptyList","useState","setData","useEffect","resp","Array","isArray","length","RecipeButton","RecipeBrowser","useParams","faChevronLeft","faPlusCircle","find","c","categoryCode","sortData","where","sort","a","b","getRecipesFromCategory","ModalWindow","show","onCancel","onSubmit","title","text","Modal","onHide","Header","closeButton","Title","Body","Footer","SHOPPING_LIST_COLL","addToShoppingList","uid","obj","set","list","FieldValue","arrayUnion","merge","ListContainer","ItemContainer","lineThrough","ItemButton","MainOptionContainer","ManualAdder","InputGroup","convertObjects","i","unit","unitCode","getUnitName","ListItem","itemAdded","addOption","deleteOption","actionExecuted","setActionExecuted","currentUser","disabled","faCheck","arrayRemove","deleteFromShoppingList","faTrash","IngredientList","setList","itemsAdded","setItemsAdded","deleteModalIsOpen","setDeleteModalIsOpen","dataCopied","setDataCopied","customItem","setCustomItem","addAllOption","clearOption","exportOption","copy","join","setTimeout","faClipboard","manualAdder","Form","Control","type","onChange","e","target","placeholder","maxLength","Append","clearShoppingList","RecipeTitleContainer","TimerContainer","SingleTimerContainer","FooterButton","DifficultMeter","level","solidFaStar","regularFaStar","TimeDisplay","minutes","description","h","Math","floor","m","RecipePreview","steps","faPlayCircle","difficult","preparationTime","cookingTime","ingredients","delete","useTimer","onTimeOver","isRunning","startTime","initialTime","timeLeft","lastSetTimeValue","status","setStatus","intervalRef","useRef","current","stopService","getTime","clearInterval","undefined","play","setInterval","pause","resetTime","autoPause","setTime","newTime","autoStart","PopupMainContainer","hide","PopupContainer","CenterText","generateTimerString","s","CookingPopupPanel","popupMode","stepTimerValue","fontSize","onFontSizeChange","faPause","faPlay","faUndo","faMinus","faPlus","TextContainer","ControlButtonMainContainer","ControlButtonRowContainer","ControlButtonStyle","ControlButton","Cooking","ingredientMode","setIngredientMode","setPopupMode","setFontSize","stepNumber","setStepNumber","exitModalIsOpen","setExitModalIsOpen","switchStep","diff","v","switchPopup","popupId","idx","timer","faClock","faSearchPlus","faTimes","NumberPicker","minValue","maxValue","prefix","zeroCustomText","val","setVal","updateValue","newValue","round","Prepend","slice","reverse","style","textAlign","readOnly","SectionTitle","FooterMessage","RecipeEditor","setName","setDifficult","setPreparationTime","setCookingTime","currentData","downText","upText","marginTop","updateRecipe","add","res","addRecipe","highlight","CornerButton","DropdownSelector","select","IngredientSelector","dictionary","RecipeIngredientPanel","no","initialValues","onDelete","onUpdate","modified","setModified","ingredientId","setIngredientId","setValue","unitConfig","uc","getUnitConfig","getIngredient","INGREDIENTS_COLL","getIngredients","getIngredientsFromSystemAndRecipe","fromRecipe","getIngredientsFromRecipe","fromSystem","Promise","all","NewItemButton","cloneObject","JSON","parse","stringify","IngredientEditor","dataSetter","newList","splice","deleteItem","ingredient","updateItem","addNewItem","Textarea","textarea","TextareaCounter","RecipeStepPanel","stepCount","setText","setTimer","ShoppingList","getShoppingList","SearchGroup","SearchResultButton","ButtonArrowIcon","getCategoryName","SearchResultPanels","recipes","searchQuery","historyHook","toLowerCase","filteredRecipes","filter","includes","Search","searchText","setSearchText","TrashIcon","IngredientAdder","dropdownIsOpen","setDropdownIsOpen","unitType","setUnitType","marginBottom","addIngredient","Dropdown","isOpen","toggle","Toggle","caret","Menu","Item","IngredientBrowser","selectedId","setSelectedId","setRefreshFlag","f","color","exportDataFromCollection","collectionName","docName","Panel","logout","signOut","exact","component","StepEditor","exportData","setExportData","fetchingInProgress","setFetchingInProgress","fileName","setFileName","fetchData","typeID","displayName","email","encodeURIComponent","downloadAnchorNode","document","createElement","setAttribute","body","appendChild","click","remove","PrivateRoute","routes","route","render","App","Suspense","fallback","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.07ef3c36.chunk.js","sourcesContent":["import firebase from 'firebase/app'\r\nimport 'firebase/auth'\r\nimport 'firebase/firestore'\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyDRdHmJADtfgGpVkNCP55h1jbYkMUDY1GM\",\r\n    authDomain: \"lubfoodgh.firebaseapp.com\",\r\n    projectId: \"lubfoodgh\",\r\n    storageBucket: \"lubfoodgh.appspot.com\",\r\n    messagingSenderId: \"719043369683\",\r\n    appId: \"1:719043369683:web:6b35ccb6f9d50abebad226\"\r\n}\r\nfirebase.initializeApp(firebaseConfig)\r\n\r\nexport default firebase\r\n","const KEY_NAME = 'authenticatedWithFirebase'\r\n\r\nexport const authorizationIsInProgress = () => window.localStorage.getItem(KEY_NAME) !== null\r\n\r\nexport const authorizationStart = () => window.localStorage.setItem(KEY_NAME, new Date().toString())\r\n\r\nexport const authorizationEnd = () => window.localStorage.removeItem(KEY_NAME)\r\n","import React, { Component, createContext } from 'react'\r\nimport firebase from './firebase'\r\nimport PropTypes from 'prop-types'\r\nimport { authorizationStart, authorizationEnd } from './authorizationProgressFlag'\r\n\r\nexport const UserContext = createContext({ user: null })\r\n\r\nclass UserProvider extends Component {\r\n    state = {\r\n        user: null\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        firebase.auth().onAuthStateChanged(userAuth => {\r\n            if(userAuth) {\r\n                firebase.firestore().collection('whitelist').get()\r\n                    .then(() => {\r\n                        authorizationStart()\r\n                        this.setState({ user: userAuth })\r\n                    })\r\n                    .catch(() => {\r\n                        authorizationEnd()\r\n                        alert('PERMISSION DENIED!')\r\n                        this.setState({ user: null })\r\n                    })\r\n            }else{\r\n                authorizationEnd()\r\n                this.setState({ user: null })\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <UserContext.Provider value={this.state.user}>\r\n                {this.props.children}\r\n            </UserContext.Provider>\r\n        )\r\n    }\r\n}\r\n\r\nUserProvider.propTypes = {\r\n    children: PropTypes.element.isRequired\r\n}\r\n\r\nexport default UserProvider\r\n","export default __webpack_public_path__ + \"static/media/lubfoodlogo.00dc66c1.png\";","import React, { useContext } from 'react'\r\nimport styled from 'styled-components'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faKey } from '@fortawesome/free-solid-svg-icons'\r\nimport { Button } from 'react-bootstrap'\r\nimport firebase from 'firebase'\r\nimport {UserContext} from '../firebase/UserContext'\r\nimport {Redirect} from 'react-router'\r\nimport logo from '../lubfoodlogo.png'\r\nimport {authorizationIsInProgress, authorizationStart} from '../firebase/authorizationProgressFlag'\r\n\r\nconst LoginForm = styled.div`\r\nbackground-color: #393e46;\r\nwidth: 100vw;\r\nmax-width: 800px;\r\nheight: 100vh;\r\ntext-align: center;\r\npadding: 80px 50px 0 50px;\r\nbox-shadow: 0 0 30px 6px rgba(0,0,0,0.75);\r\n`\r\n\r\nconst LubFood = styled.div`\r\nmargin-bottom: 30px;\r\n  img {\r\n    max-width: 80%;\r\n  }\r\n`\r\n\r\nconst KeyIcon = styled(FontAwesomeIcon)`\r\nmargin-right: 14px;\r\n`\r\n\r\nconst LoginButton = styled(Button)`\r\npadding: 10px 20px;\r\n`\r\n\r\nconst ProgressLabel = styled.div`\r\ncolor: #fff;\r\nfont-size: 20px;\r\nanimation: pulse 0.5s infinite;\r\nanimation-direction: alternate;\r\n\r\n@keyframes pulse {\r\n0% { color: rgba(255, 255, 255, 1) }\r\n100% { color: rgba(255, 255, 255, 0.2) }\r\n}\r\n`\r\n\r\nconst AbortButton = styled(Button)`\r\npadding: 4px 20px;\r\nposition: fixed;\r\nbottom: 10px;\r\ntransform: translateX(-50%);\r\n`\r\n\r\nconst signInWithGoogle = () => {\r\n    authorizationStart()\r\n    const provider = new firebase.auth.GoogleAuthProvider()\r\n    firebase.auth().signInWithRedirect(provider)\r\n        .catch(err => alert(`AUTH ERROR: ${err}`))\r\n}\r\n\r\nconst LoginPage = () => {\r\n    const authorized = useContext(UserContext)\r\n    const authInProgress = authorizationIsInProgress()\r\n    if(authorized) {\r\n        return (<Redirect to={'/recipes'}/>)\r\n    }else{\r\n        return (\r\n            <LoginForm>\r\n                <LubFood><img src={logo} alt={'lubfood logo'}/></LubFood>\r\n                {\r\n                    authInProgress\r\n                    ?\r\n                        <>\r\n                            <ProgressLabel>Logowanie w toku...</ProgressLabel>\r\n                            <AbortButton variant={'danger'} size={'sm'} onClick={signInWithGoogle}>\r\n                                Spróbuj ponownie\r\n                            </AbortButton>\r\n                        </>\r\n                        :\r\n                        <LoginButton variant={'light'} onClick={signInWithGoogle}>\r\n                            <KeyIcon icon={faKey}/>Zaloguj do systemu\r\n                        </LoginButton>\r\n                }\r\n            </LoginForm>\r\n        )\r\n    }\r\n}\r\n\r\nexport default LoginPage\r\n","import React from 'react'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faUtensils, faShoppingCart, faSearch, faCarrot, faUser } from '@fortawesome/free-solid-svg-icons'\r\nimport { useLocation } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst NavContainer = styled.div`\r\n  width: 100%;\r\n  max-width: 800px;\r\n  position: fixed;\r\n  bottom: 0;\r\n  background-color: #2868ac;\r\n  height: 70px;\r\n  display: flex;\r\n  border-top: 1px #222020 solid;\r\n  z-index: 9999;\r\n`\r\n\r\nconst NavItem = styled(Link)`\r\nflex: 1;\r\ncolor: #fff;\r\npadding: 14px 2px 5px 2px;\r\ntext-decoration: none;\r\ntext-align: center;\r\nline-height: 20px;\r\nfont-size: 12px;\r\n\r\n&.active {\r\nbackground-color: #0c0c0c;\r\n}\r\n\r\n&:hover {\r\nbackground-color: #0c0c0c;\r\ntext-decoration: none;\r\ncolor: #fff;\r\n}\r\n\r\n.menu-icon {\r\nfont-size: 22px;\r\ndisplay: block;\r\nmargin: 0 auto 4px auto;\r\n}\r\n`\r\n\r\nconst items = [\r\n    { icon: faUtensils, name: 'Przepisy', path: '/recipes' },\r\n    { icon: faShoppingCart, name: 'Zakupy', path: '/shoping-list' },\r\n    { icon: faSearch, name: 'Szukaj', path: '/search' },\r\n    { icon: faCarrot, name: 'Składniki', path: '/ingredients' },\r\n    { icon: faUser, name: 'Profil', path: '/profile' }\r\n]\r\n\r\nconst NavMenu = () => {\r\n    const location = useLocation()\r\n    return (\r\n        <NavContainer>\r\n            {\r\n                items.map(item => (\r\n                    <NavItem key={item.name}\r\n                             to={item.path}\r\n                             className={location.pathname.indexOf(item.path) >= 0 && 'active'}>\r\n                        <FontAwesomeIcon className={'menu-icon'} icon={item.icon}/>\r\n                        {item.name}\r\n                    </NavItem>\r\n                ))\r\n            }\r\n        </NavContainer>\r\n    )\r\n}\r\n\r\nexport default NavMenu\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport NavMenu from './NavMenu'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Container = styled.div`\r\n  background-color: #3589e3;\r\n  width: 100%;\r\n  height: 100vh;\r\n`\r\n\r\nconst Content = styled.div`\r\n  background-color: #3589e3;\r\n  color: #fff;\r\n  min-height: 100%;\r\n  padding: 5px 5px 90px 5px;\r\n  box-shadow: 0 0 30px 6px rgba(0, 0, 0, 0.75);\r\n`\r\n\r\nconst Layout = ({children}) => (\r\n    <Container>\r\n        <Content>{children}</Content>\r\n        <NavMenu/>\r\n    </Container>\r\n)\r\n\r\nLayout.propTypes = {\r\n    children: PropTypes.element.isRequired\r\n}\r\n\r\nexport default Layout\r\n","export default {\r\n    categories: [\r\n        { code: 'cakes', name: 'Ciasta' },\r\n        { code: 'maindishes', name: 'Dania główne' },\r\n        { code: 'desserts', name: 'Desery' },\r\n        { code: 'drinks', name: 'Napoje' },\r\n        { code: 'snacks', name: 'Przekąski' },\r\n        { code: 'soups', name: 'Zupy' },\r\n    ],\r\n    ingredientUtils: [\r\n        { code: 'UNKNOW', name: 'Dowolna', label: '', min: 0, max: 0, step: null },\r\n        { code: 'QUANTITY', name: 'Sztuki', label: ' szt.', min: 0, max: 20, step: [0.25, 1] },\r\n        { code: 'ML', name: 'Mililitry', label: ' ml', min: 0, max: 3000, step: [10, 100] },\r\n        { code: 'GLASS', name: 'Szklanki', label: ' szklanki', min: 0, max: 10, step: [0.25, 1] },\r\n        { code: 'KG', name: 'Kilogramy', label: ' kg', min: 0, max: 10, step: [0.1, 0.5] },\r\n        { code: 'G', name: 'Gramy', label: ' g', min: 0, max: 5000, step: [10, 100] },\r\n        { code: 'SPOON', name: 'Łyżka', label: ' łyżki', min: 0, max: 10, step: [0.25, 1] },\r\n        { code: 'TEASPOON', name: 'Łyżeczka', label: ' łyżeczki', min: 0, max: 10, step: [0.5, 1] },\r\n    ],\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { Button } from 'react-bootstrap'\r\nimport PropTypes from 'prop-types'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nconst Container = styled.div`\r\n  position: relative;\r\n  text-align: center;\r\n  margin: 10px auto;\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n`\r\n\r\nconst Btn = styled(Button)`\r\n  position: absolute;\r\n  min-width: 60px;\r\n  left: ${props => props.onRight ? 'inherit' : '10px'};\r\n  right: ${props => props.onRight ? '10px' : 'inherit'};\r\n`\r\n\r\nconst SideButton = ({ onRight, buttonObj }) => {\r\n    const { push } = useHistory()\r\n    if(buttonObj) {\r\n        return(\r\n            <Btn variant={buttonObj.variant} onRight={onRight} onClick={() => push(buttonObj.link)}>\r\n                <FontAwesomeIcon icon={buttonObj.icon}/>\r\n            </Btn>\r\n        )\r\n    }else{\r\n        return <></>\r\n    }\r\n}\r\n\r\nSideButton.propTypes = {\r\n    onRight: PropTypes.bool,\r\n    buttonObj: PropTypes.object\r\n}\r\n\r\nSideButton.defaultProps = {\r\n    onRight: false\r\n}\r\n\r\nconst CardTitle = ({children, leftButton, rightButton}) => {\r\n\r\n    return(\r\n        <Container>\r\n            <SideButton buttonObj={leftButton}/>\r\n            {children}\r\n            <SideButton onRight buttonObj={rightButton}/>\r\n        </Container>\r\n    )\r\n}\r\n\r\nCardTitle.propTypes = {\r\n    children: PropTypes.string.isRequired,\r\n    leftButton: PropTypes.object,\r\n    rightButton: PropTypes.object,\r\n}\r\n\r\nexport default CardTitle\r\n","import React from 'react'\r\nimport { Button } from 'react-bootstrap'\r\nimport styled from 'styled-components'\r\nimport config from '../config'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faChevronRight } from '@fortawesome/free-solid-svg-icons'\r\nimport { useHistory } from 'react-router-dom'\r\nimport CardTitle from '../components/CardTitle'\r\n\r\nconst ButtonGroup = styled.div`\r\n  padding: 10px;\r\n`\r\n\r\nconst CategoryButton = styled(Button)`\r\n  position: relative;\r\n  text-align: left;\r\n  line-height: 40px;\r\n  margin-bottom: 12px;\r\n`\r\n\r\nconst CategoryArrowIcon = styled(FontAwesomeIcon)`\r\n  position: absolute;\r\n  right: 20px;\r\n  margin-top: 20px;\r\n  transform: translateY(-50%);\r\n`\r\n\r\nconst CategoryBrowser = () => {\r\n    const history = useHistory()\r\n    return(\r\n        <>\r\n            <CardTitle>Wybierz kategorię</CardTitle>\r\n            <ButtonGroup>\r\n                {\r\n                    config.categories.map(category => (\r\n                        <CategoryButton key={category.code}\r\n                                        variant={'light'}\r\n                                        block\r\n                                        onClick={() => history.push(`/recipes/${category.code}`)}>\r\n                            {category.name}\r\n                            <CategoryArrowIcon icon={faChevronRight} />\r\n                        </CategoryButton>\r\n                    ))\r\n                }\r\n            </ButtonGroup>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CategoryBrowser\r\n","import firebase from '../firebase'\r\n\r\nconst RECIPES_COLL = 'recipes'\r\nconst STEPS_FIELD = 'steps'\r\nconst INGREDIENTS_FIELD = 'ingredients'\r\n\r\n// RECIPES\r\nexport const getRecipesFromCategory = (categoryCode, sortData = true) => {\r\n    return firebase.firestore().collection(RECIPES_COLL).where('category', '==', categoryCode).get()\r\n        .then(docs => {\r\n            let data = []\r\n            docs.forEach(recipe => {\r\n                data.push({ id: recipe.id, ...recipe.data() })\r\n            })\r\n            if(sortData) {\r\n                data = data.sort((a, b) => {\r\n                    if(a.name < b.name) return -1\r\n                    if(a.name > b.name) return 1\r\n                    return 0\r\n                })\r\n            }\r\n            return data\r\n        })\r\n        .catch(err => alert(`GET ERROR ${err.code}`))\r\n}\r\n\r\nexport const getRecipe = recipeId => {\r\n    return firebase.firestore().collection(RECIPES_COLL).doc(recipeId).get()\r\n        .then(recipe => recipe.data())\r\n        .catch(err => alert(`GET ERROR ${err.code}`))\r\n}\r\n\r\nexport const getAllRecipes = () => {\r\n    return firebase.firestore().collection(RECIPES_COLL).get()\r\n        .then(docs => {\r\n            let data = []\r\n            docs.forEach(recipe => { data.push({ id: recipe.id, ...recipe.data() }) })\r\n            return data\r\n        })\r\n        .catch(err => alert(`SEARCH ERROR ${err.code}`))\r\n}\r\n\r\nexport const deleteRecipe = recipeId => {\r\n    return firebase.firestore().collection(RECIPES_COLL).doc(recipeId).delete()\r\n        .catch(err => alert(`DELETE ERROR ${err.code}`))\r\n}\r\n\r\nexport const addRecipe = (category, name, difficult, preparationTime, cookingTime) => {\r\n    return firebase.firestore().collection(RECIPES_COLL).add({\r\n        category, name, difficult, preparationTime, cookingTime, [STEPS_FIELD]: [], [INGREDIENTS_FIELD]: []\r\n    })\r\n        .then(res => res.id)\r\n        .catch(err => alert(`ADD ERROR ${err.code}`))\r\n}\r\n\r\nexport const updateRecipe = (recipeId, name, difficult, preparationTime, cookingTime) => {\r\n    return firebase.firestore().collection(RECIPES_COLL).doc(recipeId).update({\r\n        name, difficult, preparationTime, cookingTime\r\n    })\r\n        .catch(err => alert(`UPDATE ERROR ${err.code}`))\r\n}\r\n\r\nexport const getRecipeField = (recipeId, fieldName) => {\r\n    return firebase.firestore().collection(RECIPES_COLL).doc(recipeId).get()\r\n        .then(recipe => recipe.data()[fieldName])\r\n        .catch(err => alert(`GET ERROR ${err.code}`))\r\n}\r\n\r\nexport const updateRecipeField = (recipeId, fieldName, data) => {\r\n    return firebase.firestore().collection(RECIPES_COLL).doc(recipeId).update({\r\n        [fieldName]: data\r\n    })\r\n        .catch(err => alert(`UPDATE ERROR ${err.code}`))\r\n}\r\n\r\n// STEPS\r\nexport const getStepsFromRecipe = recipeId => getRecipeField(recipeId, STEPS_FIELD)\r\n\r\nexport const updateSteps = (recipeId, stepArray) => updateRecipeField(recipeId, STEPS_FIELD, stepArray)\r\n\r\n// INGREDIENTS\r\nexport const getIngredientsFromRecipe = recipeId => getRecipeField(recipeId, INGREDIENTS_FIELD)\r\n\r\nexport const updateIngredients = (recipeId, ingredientArray) => updateRecipeField(recipeId, INGREDIENTS_FIELD, ingredientArray)\r\n","import React, { useState, useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Container = styled.div`\r\n  text-align: center;\r\n  margin: 15px auto;\r\n  font-size: 18px;\r\n  font-style: italic;\r\n`\r\n\r\nconst DataLoader = ({viewer, loader, refreshFlag, noPreventEmptyList}) => {\r\n    const [data, setData] = useState(null)\r\n    useEffect(() => {\r\n        loader().then(resp => setData(resp))\r\n    }, [loader, refreshFlag])\r\n    if(data) {\r\n        if(!noPreventEmptyList && Array.isArray(data) && data.length === 0) {\r\n            return(<Container>Lista jest pusta</Container>)\r\n        }else{\r\n            return(viewer(data, setData))\r\n        }\r\n    }else{\r\n        return(<Container>Ładowanie...</Container>)\r\n    }\r\n}\r\n\r\nDataLoader.propTypes = {\r\n    viewer: PropTypes.func.isRequired,\r\n    loader: PropTypes.func.isRequired,\r\n    refreshFlag: PropTypes.bool,\r\n    noPreventEmptyList: PropTypes.bool,\r\n}\r\n\r\nDataLoader.defaultProps = {\r\n    refreshFlag: false,\r\n    noPreventEmptyList: false,\r\n}\r\n\r\nexport default DataLoader\r\n","import React from 'react'\r\nimport { Button } from 'react-bootstrap'\r\nimport styled from 'styled-components'\r\nimport config from '../config'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faChevronRight, faChevronLeft, faPlusCircle } from '@fortawesome/free-solid-svg-icons'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\nimport CardTitle from '../components/CardTitle'\r\nimport { getRecipesFromCategory } from '../firebase/firestore/recipes'\r\nimport DataLoader from '../components/DataLoader'\r\n\r\nconst ButtonGroup = styled.div`\r\n  padding: 10px;\r\n`\r\n\r\nconst RecipeButton = styled(Button)`\r\n  position: relative;\r\n  text-align: left;\r\n  line-height: 40px;\r\n  margin-bottom: 12px;\r\n`\r\n\r\nconst CategoryArrowIcon = styled(FontAwesomeIcon)`\r\n  position: absolute;\r\n  right: 20px;\r\n  margin-top: 20px;\r\n  transform: translateY(-50%);\r\n`\r\n\r\nconst RecipeBrowser = () => {\r\n    const history = useHistory()\r\n    const { category } = useParams()\r\n    return(\r\n        <>\r\n            <CardTitle\r\n                leftButton={{ link: `/recipes`, variant: `light`, icon: faChevronLeft }}\r\n                rightButton={{ link: `/recipes/${category}/add`, variant: `success`, icon: faPlusCircle }}>\r\n                {config.categories.find(c => c.code === category).name}\r\n            </CardTitle>\r\n            <DataLoader loader={() => getRecipesFromCategory(category)}\r\n                        viewer={data => (\r\n                            <ButtonGroup>\r\n                                {\r\n                                    data.map(recipe => (\r\n                                        <RecipeButton key={recipe.id}\r\n                                                        variant={'light'}\r\n                                                        block\r\n                                                        onClick={() => history.push(`/recipes/${category}/${recipe.id}`)}>\r\n                                            {recipe.name}\r\n                                            <CategoryArrowIcon icon={faChevronRight} />\r\n                                        </RecipeButton>\r\n                                    ))\r\n                                }\r\n                            </ButtonGroup>\r\n                        )}/>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default RecipeBrowser\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Button, Modal } from 'react-bootstrap'\r\n\r\nconst ModalWindow = ({ show, onCancel, onSubmit, title, text }) => {\r\n\r\n    return(\r\n        <Modal show={show} onHide={onCancel}>\r\n            <Modal.Header closeButton>\r\n                <Modal.Title>{title}</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                {text}\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"secondary\" onClick={onCancel}>Anuluj</Button>\r\n                <Button variant=\"danger\" onClick={onSubmit}>Potwierdź</Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nModalWindow.propTypes = {\r\n    show: PropTypes.bool,\r\n    onCancel: PropTypes.func.isRequired,\r\n    onSubmit: PropTypes.func.isRequired,\r\n    title: PropTypes.string,\r\n    text: PropTypes.string,\r\n}\r\n\r\nModalWindow.defaultProps = {\r\n    show: true,\r\n    title: 'Potwierdzenie',\r\n    text: 'Czy na pewno chcesz kontynuować?',\r\n}\r\n\r\nexport default ModalWindow\r\n","import firebase from '../firebase'\r\n\r\nconst SHOPPING_LIST_COLL = 'shoppingList'\r\n\r\nexport const getShoppingList = uid => {\r\n    return firebase.firestore().collection(SHOPPING_LIST_COLL).doc(uid).get()\r\n        .then(list => list.data().list)\r\n        .catch(err => alert(`GET ERROR ${err.code}`))\r\n}\r\n\r\nexport const updateShoppingList = (uid, list) => {\r\n    return firebase.firestore().collection(SHOPPING_LIST_COLL).doc(uid).update(list)\r\n        .catch(err => alert(`UPDATE ERROR ${err.code}`))\r\n}\r\n\r\nexport const clearShoppingList = uid => {\r\n    return firebase.firestore().collection(SHOPPING_LIST_COLL).doc(uid).set({ list: [] })\r\n        .catch(err => alert(`SET ERROR ${err.code}`))\r\n}\r\n\r\nexport const addToShoppingList = (uid, obj) => {\r\n    return firebase.firestore().collection(SHOPPING_LIST_COLL).doc(uid).set({\r\n        list: typeof obj === 'string' ? firebase.firestore.FieldValue.arrayUnion(obj) : firebase.firestore.FieldValue.arrayUnion(...obj)\r\n    }, { merge: true })\r\n        .catch(err => alert(`UPDATE ERROR ${err.code}`))\r\n}\r\n\r\nexport const deleteFromShoppingList = (uid, obj) => {\r\n    return firebase.firestore().collection(SHOPPING_LIST_COLL).doc(uid).set({\r\n        list: typeof obj === 'string' ? firebase.firestore.FieldValue.arrayRemove(obj) : firebase.firestore.FieldValue.arrayRemove(...obj)\r\n    }, { merge: true })\r\n        .catch(err => alert(`UPDATE ERROR ${err.code}`))\r\n}\r\n","import React, { useState } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport styled from 'styled-components'\r\nimport { Button, ButtonGroup, Form, InputGroup } from 'react-bootstrap'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faCheck, faShoppingCart, faClipboard, faTrash } from '@fortawesome/free-solid-svg-icons'\r\nimport {addToShoppingList, clearShoppingList, deleteFromShoppingList} from '../firebase/firestore/shoppingList'\r\nimport config from '../config'\r\nimport copy from 'copy-to-clipboard'\r\nimport firebase from  '../firebase/firebase'\r\nimport ModalWindow from './ModalWindow'\r\n\r\nconst ListContainer = styled.div`\r\n  text-align: center;\r\n`\r\n\r\nconst ItemContainer = styled.div`\r\n  position: relative;\r\n  background-color: #fff;\r\n  max-width: 600px;\r\n  margin: 0 auto 5px auto;\r\n  height: 44px;\r\n  line-height: 44px;\r\n  border-radius: 4px;\r\n  color: #000;\r\n  padding-left: 70px;\r\n  overflow-y: hidden;\r\n  text-align: left;\r\n  text-decoration: ${props => props.lineThrough ? 'line-through' : 'none'};\r\n`\r\n\r\nconst ItemButton = styled(Button)`\r\n  position: absolute;\r\n  top: 6px;\r\n  left: 6px;\r\n  min-width: 50px;\r\n  text-align: center;\r\n`\r\n\r\nconst MainOptionContainer = styled(ButtonGroup)`\r\n  display: block;\r\n  text-align: center;\r\n  padding: 0 15px;\r\n  max-width: 600px;\r\n  margin: 15px auto;\r\n  svg { margin: 0 8px; }\r\n`\r\n\r\nconst ManualAdder = styled(InputGroup)`\r\n  margin: 15px auto;\r\n  max-width: 600px;\r\n`\r\n\r\nconst getUnitName = unitCode => {\r\n    const unit = config.ingredientUtils.find(i => i.code === unitCode)\r\n    return unit ? unit.name : ''\r\n}\r\n\r\nconst convertObjects = list => {\r\n    if(list.length === 0) return []\r\n    if(typeof list[0] === 'string') return list\r\n    if(typeof list[0] === 'object' && list[0] !== null) {\r\n        return list.map(i => {\r\n            if(i.unit === '') {\r\n                return ''\r\n            }else{\r\n                return `${i.name} [${getUnitName(i.unit)}]${i.value === 0 ? '' : ' - ' + i.value}`\r\n            }\r\n        })\r\n    }\r\n    return []\r\n}\r\n\r\nconst ListItem = ({ item, itemAdded, addOption, deleteOption }) => {\r\n    const [actionExecuted, setActionExecuted] = useState(false)\r\n    const uid = firebase.auth().currentUser.uid\r\n\r\n    const addAction = () => {\r\n        setActionExecuted(true)\r\n        addToShoppingList(uid, item)\r\n    }\r\n    const deleteAction = () => {\r\n        setActionExecuted(true)\r\n        deleteFromShoppingList(uid, item)\r\n    }\r\n\r\n    return(\r\n        <ItemContainer lineThrough={deleteOption && actionExecuted}>\r\n            {\r\n                addOption\r\n                &&\r\n                <ItemButton variant={'success'} size={'sm'} disabled={actionExecuted || itemAdded} onClick={addAction}>\r\n                    <FontAwesomeIcon icon={actionExecuted || itemAdded ? faCheck : faShoppingCart}/>\r\n                </ItemButton>\r\n            }\r\n            {\r\n                deleteOption\r\n                &&\r\n                <ItemButton variant={'danger'} size={'sm'} disabled={actionExecuted} onClick={deleteAction}>\r\n                    <FontAwesomeIcon icon={faTrash}/>\r\n                </ItemButton>\r\n            }\r\n            {item}\r\n        </ItemContainer>\r\n    )\r\n}\r\n\r\nListItem.propTypes = {\r\n    item: PropTypes.string.isRequired,\r\n    itemAdded: PropTypes.bool,\r\n    addOption: PropTypes.bool,\r\n    deleteOption: PropTypes.bool,\r\n}\r\n\r\nconst IngredientList = (props) => {\r\n    const [list, setList] = useState(convertObjects(props.list))\r\n    const [itemsAdded, setItemsAdded] = useState(false)\r\n    const [deleteModalIsOpen, setDeleteModalIsOpen] = useState(false)\r\n    const [dataCopied, setDataCopied] = useState(false)\r\n    const [customItem, setCustomItem] = useState('')\r\n    const uid = firebase.auth().currentUser.uid\r\n\r\n    const addAll = () => {\r\n        setItemsAdded(true)\r\n        addToShoppingList(uid, list)\r\n    }\r\n    const deleteAll = () => {\r\n        setDeleteModalIsOpen(false)\r\n        setList([])\r\n        clearShoppingList(uid)\r\n    }\r\n    const copyToClipboard = () => {\r\n        setDataCopied(true)\r\n        copy(list.join('\\n'))\r\n        setTimeout(() => setDataCopied(false), 2000)\r\n    }\r\n    const addCustomItem = () => {\r\n        setList([\r\n            ...list,\r\n            customItem\r\n        ])\r\n        addToShoppingList(uid, customItem)\r\n        setCustomItem('')\r\n    }\r\n\r\n    return(\r\n        <ListContainer>\r\n            <MainOptionContainer block>\r\n                {\r\n                    props.addAllOption\r\n                    &&\r\n                    <Button variant={'success'} onClick={addAll} disabled={itemsAdded || list.length === 0}>\r\n                        <FontAwesomeIcon icon={itemsAdded ? faCheck : faShoppingCart}/>{itemsAdded ? 'Dodano' : 'Dodaj wszystkie'}\r\n                    </Button>\r\n                }\r\n                {\r\n                    props.clearOption\r\n                    &&\r\n                    <Button variant={'danger'} onClick={() => setDeleteModalIsOpen(true)} disabled={list.length === 0}>\r\n                        <FontAwesomeIcon icon={faTrash}/>Wyczyść\r\n                    </Button>\r\n                }\r\n                {\r\n                    props.exportOption\r\n                    &&\r\n                    <Button variant={'warning'} onClick={copyToClipboard} disabled={dataCopied || list.length === 0}>\r\n                        <FontAwesomeIcon icon={dataCopied ? faCheck : faClipboard}/>{dataCopied ? 'Zapisano!' : 'Do schowka'}\r\n                    </Button>\r\n                }\r\n            </MainOptionContainer>\r\n            {\r\n                list.map(item => (\r\n                    <ListItem key={item} item={item} itemsAdded={itemsAdded} {...props} />\r\n                ))\r\n            }\r\n            {list.length === 0 && <i>(lista składników jest pusta)</i>}\r\n            {\r\n                props.manualAdder\r\n                &&\r\n                <ManualAdder>\r\n                    <Form.Control type={'text'}\r\n                                  value={customItem}\r\n                                  onChange={e => setCustomItem(e.target.value)} placeholder={'Nowa pozycja'}\r\n                                  maxLength={'50'} />\r\n                    <InputGroup.Append>\r\n                        <Button variant={'success'}\r\n                                onClick={addCustomItem}\r\n                                disabled={customItem.length < 5}>\r\n                            Dodaj\r\n                        </Button>\r\n                    </InputGroup.Append>\r\n                </ManualAdder>\r\n            }\r\n            <ModalWindow show={deleteModalIsOpen}\r\n                         onSubmit={deleteAll}\r\n                         onCancel={() => setDeleteModalIsOpen(false)}\r\n                         text={'Czy chcesz usunąć całą listę zakupów?'} />\r\n        </ListContainer>\r\n    )\r\n}\r\n\r\nIngredientList.propTypes = {\r\n    list: PropTypes.array.isRequired,\r\n    addOption: PropTypes.bool,\r\n    deleteOption: PropTypes.bool,\r\n    exportOption: PropTypes.bool,\r\n    addAllOption: PropTypes.bool,\r\n    clearOption: PropTypes.bool,\r\n    manualAdder: PropTypes.bool,\r\n}\r\n\r\nexport default IngredientList\r\n","import React, { useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport PropTypes from 'prop-types'\r\nimport { Button } from 'react-bootstrap'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faTrash, faChevronLeft, faPlayCircle, faStar as solidFaStar } from '@fortawesome/free-solid-svg-icons'\r\nimport { faStar as regularFaStar } from '@fortawesome/free-regular-svg-icons'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\nimport CardTitle from '../components/CardTitle'\r\nimport { getRecipe, deleteRecipe } from '../firebase/firestore/recipes'\r\nimport DataLoader from '../components/DataLoader'\r\nimport ModalWindow from '../components/ModalWindow'\r\nimport IngredientList from '../components/IngredientList'\r\n\r\nconst RecipeTitleContainer = styled.div`\r\n  margin: 50px 20px 30px;\r\n  font-size: 1.2rem;\r\n`\r\n\r\nconst Title = styled.div`\r\n  text-align: center;\r\n  margin-top: 14px;\r\n`\r\n\r\nconst Content = styled.div`\r\n  text-align: center;\r\n  font-weight: bold;\r\n  margin: 6px 0 0 0;\r\n`\r\n\r\nconst TimerContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  margin-top: 20px;\r\n`\r\n\r\nconst SingleTimerContainer = styled.div`\r\n  flex: 1;\r\n  font-size: 14px;\r\n  text-align: center;\r\n  div {\r\n    font-size: 3rem;\r\n  }\r\n`\r\n\r\nconst FooterButton = styled(Button)`\r\n  min-width: 200px;\r\n  max-width: 600px;\r\n  margin: 5px auto;\r\n  svg { margin-right: 6px; }\r\n`\r\n\r\nconst DifficultMeter = ({level}) => (\r\n    <Content>\r\n        {[1,2,3,4,5].map(i => <FontAwesomeIcon key={i} icon={level >= i ? solidFaStar : regularFaStar} />)}\r\n    </Content>\r\n)\r\n\r\nDifficultMeter.propTypes = {\r\n    level: PropTypes.number.isRequired\r\n}\r\n\r\nconst TimeDisplay = ({minutes, description}) => {\r\n    let h = Math.floor(minutes / 60)\r\n    let m = minutes % 60\r\n    if(m < 10) m = '0' + m\r\n    return (\r\n        <SingleTimerContainer>\r\n            {minutes === 0 ? <div>--:--</div> : <div>{h}:{m}</div>}\r\n            {description}\r\n        </SingleTimerContainer>\r\n    )\r\n}\r\n\r\nTimeDisplay.propTypes = {\r\n    minutes: PropTypes.number.isRequired,\r\n    description: PropTypes.string,\r\n}\r\n\r\nconst RecipePreview = () => {\r\n    const [deleteModalIsOpen, setDeleteModalIsOpen] = useState(false)\r\n    const { push } = useHistory()\r\n    const { category, recipe } = useParams()\r\n\r\n    return (\r\n        <>\r\n            <DataLoader loader={() => getRecipe(recipe)} viewer={data => (\r\n                <>\r\n                    <CardTitle\r\n                        leftButton={{ link: `/recipes/${category}`, variant: `light`, icon: faChevronLeft }}\r\n                        rightButton={data.steps.length > 0 && { link: `/recipes/${category}/${recipe}/cooking`, variant: `success`, icon: faPlayCircle }}>\r\n                        Podgląd przepisu\r\n                    </CardTitle>\r\n                    <RecipeTitleContainer>\r\n                        <Content>{data.name}</Content>\r\n                        <DifficultMeter level={data.difficult} />\r\n                        <TimerContainer>\r\n                            <TimeDisplay minutes={data.preparationTime} description={'Czas przygotowywania'} />\r\n                            <TimeDisplay minutes={data.cookingTime} description={'Czas gotowania'} />\r\n                        </TimerContainer>\r\n                    </RecipeTitleContainer>\r\n                    <Title>Lista składników</Title>\r\n                    <IngredientList list={data.ingredients} addOption addAllOption exportOption />\r\n                    <Title>Zarządzanie przepisem</Title>\r\n                    <Content>\r\n                        <FooterButton variant={'secondary'} block onClick={() => push(`/recipes/${category}/${recipe}/edit-recipe`)}>Edytuj przepis</FooterButton>\r\n                        <FooterButton variant={'secondary'} block onClick={() => push(`/recipes/${category}/${recipe}/edit-ingredients`)}>Edytuj listę składników</FooterButton>\r\n                        <FooterButton variant={'secondary'} block onClick={() => push(`/recipes/${category}/${recipe}/edit-steps`)}>Edytuj listę kroków</FooterButton>\r\n                        <FooterButton variant={'danger'} block onClick={() => setDeleteModalIsOpen(true)}>\r\n                            <FontAwesomeIcon icon={faTrash} /> Usuń przepis\r\n                        </FooterButton>\r\n                    </Content>\r\n                </>\r\n            )} />\r\n            <ModalWindow show={deleteModalIsOpen}\r\n                         text={'Czy chcesz usunąć cały przepis?'}\r\n                         onSubmit={() => deleteRecipe(recipe).then(() => push(`/recipes/${category}`))}\r\n                         onCancel={() => setDeleteModalIsOpen(false)} />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default RecipePreview\r\n","import { useState, useEffect, useRef } from 'react'\r\n\r\nconst useTimer = (onTimeOver) => {\r\n    const [status, setStatus] = useState({\r\n        isRunning: false,\r\n        startTime: 0,\r\n        initialTime: 0,\r\n        timeLeft: 0,\r\n        lastSetTimeValue: 0,\r\n    })\r\n    const intervalRef = useRef()\r\n\r\n    const update = () => {\r\n        setStatus(current => {\r\n            if(current.timeLeft <= 0) {\r\n                stopService()\r\n                if(onTimeOver) onTimeOver()\r\n                return {\r\n                    ...current,\r\n                    isRunning: false,\r\n                    timeLeft: 0\r\n                }\r\n            }else{\r\n                return {\r\n                    ...current,\r\n                    timeLeft: Math.floor(current.initialTime - (new Date() - current.startTime.getTime()) / 1000)\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    const stopService = () => {\r\n        if(intervalRef.current) {\r\n            clearInterval(intervalRef.current)\r\n            intervalRef.current = undefined\r\n        }\r\n    }\r\n\r\n    const startService = () => {\r\n        if(!intervalRef.current) {\r\n            intervalRef.current = setInterval(update, 100)\r\n            update()\r\n        }\r\n    }\r\n\r\n    const play = () => {\r\n        if(!status.isRunning && status.timeLeft > 0) {\r\n            setStatus(current => ({\r\n                ...current,\r\n                isRunning: true,\r\n                initialTime: current.timeLeft,\r\n                startTime: new Date(),\r\n            }))\r\n            startService()\r\n        }\r\n    }\r\n\r\n    const pause = () => {\r\n        if(status.isRunning) {\r\n            setStatus(current => ({\r\n                ...current,\r\n                isRunning: false,\r\n            }))\r\n            stopService()\r\n        }\r\n    }\r\n\r\n    const resetTime = (autoPause = true) => {\r\n        setStatus(current => ({\r\n            ...current,\r\n            isRunning: autoPause ? false : current.isRunning,\r\n            startTime: new Date(),\r\n            initialTime: current.lastSetTimeValue,\r\n            timeLeft: current.lastSetTimeValue,\r\n        }))\r\n        if(autoPause) stopService()\r\n    }\r\n\r\n    const setTime = (newTime, autoStart = false) => {\r\n        setStatus({\r\n            isRunning: false,\r\n            startTime: 0,\r\n            initialTime: newTime,\r\n            timeLeft: newTime,\r\n            lastSetTimeValue: newTime,\r\n        })\r\n        stopService()\r\n        if(autoStart) play()\r\n    }\r\n\r\n    useEffect(() => stopService, [])\r\n\r\n    return {\r\n        isRunning: status.isRunning,\r\n        timeLeft: status.timeLeft,\r\n        play,\r\n        pause,\r\n        resetTime,\r\n        setTime,\r\n    }\r\n}\r\n\r\nexport default useTimer\r\n","import React, { useEffect } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport styled from 'styled-components'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faMinus, faPlus, faPlay, faPause, faUndo } from '@fortawesome/free-solid-svg-icons'\r\nimport { Button } from 'react-bootstrap'\r\nimport useTimer from '../hooks/useTimer'\r\n\r\nconst MIN_FONT_SIZE = 18\r\nconst MAX_FONT_SIZE = 50\r\n\r\nconst PopupMainContainer = styled.div`\r\n  display: ${props => props.hide ? 'none' : 'block'};\r\n  position: fixed;\r\n  left: 0;\r\n  bottom: 320px;\r\n  width: 100%;\r\n`\r\n\r\nconst PopupContainer = styled.div`\r\n  position: relative;\r\n  background-color: #fff;\r\n  border-radius: 5px;\r\n  width: 400px;\r\n  max-width: 90vw;\r\n  height: 90px;\r\n  margin: 0 auto;\r\n  color: #000;\r\n`\r\n\r\nconst Title = styled.div`\r\n  text-align: center;\r\n  font-weight: bold;\r\n  padding: 8px 0;\r\n`\r\n\r\nconst CenterText = styled.div`\r\n  text-align: center;\r\n  font-size: 2rem;\r\n  position: relative;\r\n  bottom: 6px;\r\n  margin: 0 70px;\r\n`\r\n\r\nconst SideButton = styled(Button)`\r\n  position: absolute;\r\n  left: ${props => props.onRight ? 'inherit' : '10px'};\r\n  right: ${props => props.onRight ? '10px' : 'inherit'};\r\n`\r\n\r\nconst generateTimerString = timeLeft => {\r\n    if(timeLeft === 0) return `-:--:--`\r\n    let h = Math.floor(timeLeft / 3600)\r\n    let m = Math.floor(timeLeft / 60)\r\n    let s = Math.floor(timeLeft - h * 3600 - m * 60)\r\n    if(m < 10) m = '0' + m\r\n    if(s < 10) s = '0' + s\r\n    return `${h}:${m}:${s}`\r\n}\r\n\r\nconst CookingPopupPanel = ({popupMode, stepTimerValue, fontSize, onFontSizeChange, onTimeOver}) => {\r\n    const { isRunning, timeLeft, play, pause, setTime, } = useTimer(() => {\r\n        if(onTimeOver) onTimeOver()\r\n    })\r\n\r\n    useEffect(() => {\r\n        if(!isRunning) setTime(stepTimerValue * 60)\r\n    }, [stepTimerValue])\r\n\r\n    const playPauseButton = () => {\r\n        if(isRunning) {\r\n            pause()\r\n        }else{\r\n            play()\r\n        }\r\n    }\r\n\r\n    const resetButton = () => {\r\n        if(!isRunning) setTime(stepTimerValue * 60)\r\n    }\r\n\r\n    return(\r\n        <PopupMainContainer hide={popupMode === 'OFF'}>\r\n            <PopupContainer>\r\n                <Title>{popupMode === 'TIMER' ? 'Timer' : 'Rozmiar czcionki'}</Title>\r\n                {\r\n                    popupMode === 'TIMER'\r\n                    ?\r\n                        <>\r\n                            <SideButton variant={'secondary'} onClick={playPauseButton}>\r\n                                <FontAwesomeIcon icon={isRunning ? faPause : faPlay}/>\r\n                            </SideButton>\r\n                            <SideButton variant={'secondary'} onRight disabled={isRunning} onClick={resetButton}>\r\n                                <FontAwesomeIcon icon={faUndo}/>\r\n                            </SideButton>\r\n                            <CenterText>{generateTimerString(timeLeft)}</CenterText>\r\n                        </>\r\n                        :\r\n                        <>\r\n                            <SideButton variant={'secondary'} disabled={fontSize - 2 < MIN_FONT_SIZE} onClick={() => onFontSizeChange(fontSize - 2)}>\r\n                                <FontAwesomeIcon icon={faMinus}/>\r\n                            </SideButton>\r\n                            <SideButton variant={'secondary'} onRight disabled={fontSize + 2 > MAX_FONT_SIZE} onClick={() => onFontSizeChange(fontSize + 2)}>\r\n                                <FontAwesomeIcon icon={faPlus}/>\r\n                            </SideButton>\r\n                            <CenterText>{fontSize}</CenterText>\r\n                        </>\r\n                }\r\n            </PopupContainer>\r\n        </PopupMainContainer>\r\n    )\r\n}\r\n\r\nCookingPopupPanel.propTypes = {\r\n    popupMode: PropTypes.string,\r\n    stepTimerValue: PropTypes.number.isRequired,\r\n    fontSize: PropTypes.number.isRequired,\r\n    onFontSizeChange: PropTypes.func.isRequired,\r\n    onTimeOver: PropTypes.func,\r\n}\r\n\r\nCookingPopupPanel.defaultProps = {\r\n    popupMode: 'OFF',\r\n}\r\n\r\nexport default CookingPopupPanel\r\n","import React, { useState } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport styled from 'styled-components'\r\nimport { Button } from 'react-bootstrap'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faCarrot, faClock, faSearchPlus, faChevronLeft, faTimes, faChevronRight } from '@fortawesome/free-solid-svg-icons'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\nimport CardTitle from '../components/CardTitle'\r\nimport { getRecipe } from '../firebase/firestore/recipes'\r\nimport DataLoader from '../components/DataLoader'\r\nimport ModalWindow from '../components/ModalWindow'\r\nimport config from '../config'\r\nimport CookingPopupPanel from '../components/CookingPopupPanel'\r\n\r\nconst TextContainer = styled.div`\r\n  font-size: ${props => props.fontSize + 'px'};\r\n  padding: 20px 20px 240px;\r\n`\r\n\r\nconst ControlButtonMainContainer = styled.div`\r\n  position: fixed;\r\n  left: 0;\r\n  bottom: 70px;\r\n  width: 100%;\r\n`\r\n\r\nconst ControlButtonRowContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  max-width: 400px;\r\n  margin: 30px auto;\r\n`\r\n\r\nconst ControlButtonStyle = styled(Button)`\r\n  flex: 1;\r\n  border-radius: 50%;\r\n  display: block;\r\n  max-width: 80px;\r\n  height: 80px;\r\n  margin: 0 auto;\r\n  font-size: 2rem;\r\n`\r\n\r\nconst ControlButton = ({variant = 'light', icon, onClick, disabled}) => {\r\n\r\n    return(\r\n        <ControlButtonStyle variant={variant} onClick={onClick} disabled={disabled}>\r\n            <FontAwesomeIcon icon={icon} />\r\n        </ControlButtonStyle>\r\n    )\r\n}\r\n\r\nControlButton.propTypes = {\r\n    variant: PropTypes.string,\r\n    icon: PropTypes.object.isRequired,\r\n    onClick: PropTypes.func,\r\n    disabled: PropTypes.bool,\r\n}\r\n\r\nconst getUnitName = unitCode => {\r\n    const unit = config.ingredientUtils.find(i => i.code === unitCode)\r\n    return unit ? unit.name : ''\r\n}\r\n\r\nconst getIngredientList = ingredients => (\r\n    ingredients.map((i, idx) => (\r\n        <div key={i.id}>{`${idx+1}. ${i.name} [${getUnitName(i.unit)}]${i.value === 0 ? '' : ' - ' + i.value}`}</div>\r\n    ))\r\n)\r\n\r\nconst Cooking = () => {\r\n    const [ingredientMode, setIngredientMode] = useState(false)\r\n    const [popupMode, setPopupMode] = useState('OFF')\r\n    const [fontSize, setFontSize] = useState(28)\r\n    const [stepNumber, setStepNumber] = useState(0)\r\n    const [exitModalIsOpen, setExitModalIsOpen] = useState(false)\r\n    const { push } = useHistory()\r\n    const { category, recipe } = useParams()\r\n\r\n    const switchStep = (data, diff) => {\r\n        setStepNumber(v => {\r\n            if(ingredientMode) setIngredientMode(false)\r\n\r\n            return v + diff\r\n        })\r\n    }\r\n\r\n    const switchPopup = popupId => {\r\n        setPopupMode(popupId === popupMode ? 'OFF' : popupId)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <DataLoader loader={() => getRecipe(recipe)} viewer={data => (\r\n                <>\r\n                    <CardTitle>{data.name}</CardTitle>\r\n                    <TextContainer fontSize={fontSize}>\r\n                        {ingredientMode ? getIngredientList(data.ingredients) : `${stepNumber+1}. ${data.steps[stepNumber].text}`}\r\n                    </TextContainer>\r\n                    <CookingPopupPanel popupMode={popupMode}\r\n                                       stepTimerValue={data.steps[stepNumber].timer}\r\n                                       fontSize={fontSize}\r\n                                       onFontSizeChange={v => setFontSize(v)}\r\n                                       onTimeOver={() => {setTimeout(() => setPopupMode('TIMER'), 0)}} />\r\n                    <ControlButtonMainContainer>\r\n                        <ControlButtonRowContainer>\r\n                            <ControlButton icon={faCarrot}\r\n                                           variant={ingredientMode ? 'warning' : undefined}\r\n                                           onClick={() => setIngredientMode(v => !v)} />\r\n                            <ControlButton icon={faClock}\r\n                                           variant={popupMode === 'TIMER' ? 'warning' : undefined}\r\n                                           onClick={() => switchPopup('TIMER')} />\r\n                            <ControlButton icon={faSearchPlus}\r\n                                           variant={popupMode === 'FONT' ? 'warning' : undefined}\r\n                                           onClick={() => switchPopup('FONT')} />\r\n                        </ControlButtonRowContainer>\r\n                        <ControlButtonRowContainer>\r\n                            <ControlButton icon={faChevronLeft}\r\n                                           disabled={stepNumber === 0}\r\n                                           onClick={() => switchStep(data, -1)} />\r\n                            <ControlButton icon={faTimes}\r\n                                           variant={'secondary'}\r\n                                           onClick={() => setExitModalIsOpen(true)} />\r\n                            <ControlButton icon={faChevronRight}\r\n                                           disabled={data.steps.length - 1 <= stepNumber}\r\n                                           onClick={() => switchStep(data, 1)} />\r\n                        </ControlButtonRowContainer>\r\n                    </ControlButtonMainContainer>\r\n                </>\r\n            )}/>\r\n            <ModalWindow show={exitModalIsOpen}\r\n                         text={'Czy chcesz wyjść z trybu gotowania?'}\r\n                         onSubmit={() => push(`/recipes/${category}/${recipe}`)}\r\n                         onCancel={() => setExitModalIsOpen(false)} />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Cooking\r\n","import React, { useState, useEffect } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport styled from 'styled-components'\r\nimport { Button, Form, InputGroup } from 'react-bootstrap'\r\n\r\nconst Container = styled.div`\r\n    margin: 2px 0;\r\n`\r\n\r\nconst Btn = styled(Button)`\r\n  min-width: 40px;\r\n  font-weight: bold;\r\n  font-size: 12px;\r\n`\r\n\r\nconst NumberPicker = ({minValue, maxValue, step, value, onChange, prefix, label, zeroCustomText}) => {\r\n    const [val, setVal] = useState(value)\r\n    useEffect(() => setVal(value), [value])\r\n\r\n    const updateValue = diff => {\r\n        setVal(v => {\r\n            const newValue = Math.round((v + diff) * 100) / 100\r\n            onChange(newValue)\r\n            return newValue\r\n        })\r\n    }\r\n\r\n    return(\r\n        <Container>\r\n            <InputGroup>\r\n                {\r\n                    step\r\n                    &&\r\n                    <InputGroup.Prepend>\r\n                        {\r\n                            step.slice().reverse().map(s => (\r\n                                <Btn key={'dn'+s} variant={'secondary'}\r\n                                     onClick={() => updateValue(-s)}\r\n                                     disabled={val - s < minValue}>\r\n                                    -{s}\r\n                                </Btn>\r\n                            ))\r\n                        }\r\n                    </InputGroup.Prepend>\r\n                }\r\n                <Form.Control type={'text'}\r\n                              value={val === 0 && zeroCustomText ? zeroCustomText : `${prefix}${val}${label}`}\r\n                              style={{textAlign: 'center'}}\r\n                              readOnly />\r\n                {\r\n                    step\r\n                    &&\r\n                    <InputGroup.Append>\r\n                        {\r\n                            step.map(s => (\r\n                                <Btn key={'up'+s} variant={'secondary'}\r\n                                     onClick={() => updateValue(s)}\r\n                                     disabled={val + s > maxValue}>\r\n                                    +{s}\r\n                                </Btn>\r\n                            ))\r\n                        }\r\n                    </InputGroup.Append>\r\n                }\r\n            </InputGroup>\r\n        </Container>\r\n    )\r\n}\r\n\r\nNumberPicker.propTypes = {\r\n    minValue: PropTypes.number,\r\n    maxValue: PropTypes.number,\r\n    step: PropTypes.array,\r\n    value: PropTypes.number.isRequired,\r\n    onChange: PropTypes.func.isRequired,\r\n    prefix: PropTypes.string,\r\n    label: PropTypes.string,\r\n    zeroCustomText: PropTypes.string,\r\n}\r\n\r\nNumberPicker.defaultProps = {\r\n    minValue: 0,\r\n    maxValue: 100,\r\n    step: [1],\r\n    prefix: '',\r\n    label: '',\r\n}\r\n\r\nexport default NumberPicker\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Button, Form } from 'react-bootstrap'\r\nimport styled from 'styled-components'\r\nimport { faChevronLeft } from '@fortawesome/free-solid-svg-icons'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\nimport CardTitle from '../components/CardTitle'\r\nimport NumberPicker from '../components/NumberPicker'\r\nimport { addRecipe, getRecipe, updateRecipe } from '../firebase/firestore/recipes'\r\n\r\nconst Container = styled.div`\r\n  padding: 10px;\r\n`\r\n\r\nconst SectionTitle = styled.div`\r\n  text-align: center;\r\n  margin-top: 10px;\r\n  margin-bottom: 4px;\r\n`\r\n\r\nconst FooterMessage = styled.div`\r\n  text-align: center;\r\n  font-size: 14px;\r\n  margin: 15px auto 0 auto;\r\n  max-width: 400px;\r\n`\r\n\r\nconst RecipeEditor = () => {\r\n    const [name, setName] = useState('')\r\n    const [difficult, setDifficult] = useState(1)\r\n    const [preparationTime, setPreparationTime] = useState(0)\r\n    const [cookingTime, setCookingTime] = useState(0)\r\n    const history = useHistory()\r\n    const { category, recipe } = useParams()\r\n\r\n    useEffect(() => {\r\n        if(recipe) {\r\n            getRecipe(recipe)\r\n                .then(currentData => {\r\n                    setName(currentData.name)\r\n                    setDifficult(currentData.difficult)\r\n                    setPreparationTime(currentData.preparationTime)\r\n                    setCookingTime(currentData.cookingTime)\r\n                })\r\n        }\r\n    }, [])\r\n\r\n    const validateData = () => name.length > 3\r\n\r\n    const onSubmitButtonClick = () => {\r\n        if(recipe) {\r\n            updateRecipe(recipe, name, difficult, preparationTime, cookingTime)\r\n                .then(() => history.push(`/recipes/${category}/${recipe}`))\r\n        }else{\r\n            addRecipe(category, name, difficult, preparationTime, cookingTime)\r\n                .then(id => history.push(`/recipes/${category}/${id}`))\r\n        }\r\n    }\r\n\r\n    return(\r\n        <>\r\n            <CardTitle\r\n                leftButton={{ link: recipe ? `/recipes/${category}/${recipe}` : `/recipes/${category}`, variant: `light`, icon: faChevronLeft }}>\r\n                {recipe ? 'Edycja przepisu' : 'Nowy przepis'}\r\n            </CardTitle>\r\n            <Container>\r\n                <SectionTitle>Nazwa przepisu</SectionTitle>\r\n                <Form.Control type={'text'}\r\n                              value={name}\r\n                              onChange={e => setName(e.target.value)}\r\n                              maxLength={40} />\r\n                <SectionTitle>Trudność w przygotowaniu</SectionTitle>\r\n                <NumberPicker onChange={v => setDifficult(v)}\r\n                              value={difficult}\r\n                              minValue={1} maxValue={5} label={'/5'} />\r\n                <SectionTitle>Czas przygotowania</SectionTitle>\r\n                <NumberPicker onChange={v => setPreparationTime(v)}\r\n                              value={preparationTime} step={[10]}\r\n                              maxValue={300} label={' min'} downText={'-10'} upText={'+10'} />\r\n                <SectionTitle>Czas gotowania</SectionTitle>\r\n                <NumberPicker onChange={v => setCookingTime(v)}\r\n                              value={cookingTime} step={[10]}\r\n                              maxValue={300} label={' min'} downText={'-10'} upText={'+10'} />\r\n                <FooterMessage>\r\n                    Redagowanie listy składników oraz kroków gotowania możliwe jest z poziomu ekranu przepisu\r\n                </FooterMessage>\r\n                <Button variant={'success'} style={{marginTop: '20px'}}\r\n                        disabled={!validateData()} onClick={onSubmitButtonClick} block>\r\n                    {recipe ? 'Zaktualizuj przepis' : 'Dodaj przepis'}\r\n                </Button>\r\n            </Container>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default RecipeEditor\r\n","import React, { useState } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport styled from 'styled-components'\r\nimport { Button } from 'react-bootstrap'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faTrash, faCheck } from '@fortawesome/free-solid-svg-icons'\r\nimport NumberPicker from './NumberPicker'\r\nimport ModalWindow from './ModalWindow'\r\nimport config from '../config'\r\n\r\nconst Container = styled.div`\r\n  background-color: ${props => props.highlight ? '#ffa14d' : '#ececec'};\r\n  border-radius: 4px;\r\n  margin-bottom: 5px;\r\n  padding: 10px;\r\n  position: relative;\r\n`\r\n\r\nconst Title = styled.div`\r\n  color: #000;\r\n  line-height: 30px;\r\n  margin-bottom: 6px;\r\n`\r\n\r\nconst CornerButton = styled(Button)`\r\n  position: absolute;\r\n  top: 6px;\r\n  right: 10px;\r\n  min-width: 50px;\r\n  text-align: center;\r\n`\r\n\r\nconst DropdownSelector = styled.select`\r\n  width: 100%;\r\n  margin-bottom: 10px;\r\n  padding: 4px;\r\n  border-radius: 4px;\r\n`\r\n\r\nconst getUnitName = unitCode => {\r\n    const unit = config.ingredientUtils.find(i => i.code === unitCode)\r\n    return unit ? unit.name : ''\r\n}\r\n\r\nconst getUnitConfig = (dictionary, ingredientId) => {\r\n    if(ingredientId === '' || ingredientId === undefined) return {}\r\n    const unitCode = dictionary.find(i => i.id === ingredientId).unit\r\n    const uc = config.ingredientUtils.find(i => i.code === unitCode)\r\n    if(!uc) return {}\r\n    return { minValue: uc.min, maxValue: uc.max, step: uc.step, label: uc.label, code: uc.code }\r\n}\r\n\r\nconst getIngredient = (dictionary, ingredientId) => {\r\n    const item = dictionary.find(i => i.id === ingredientId)\r\n    if(!item) return { id: '', name: '', unit: '' }\r\n    return { id: item.id, name: item.name, unit: item.unit }\r\n}\r\n\r\nconst IngredientSelector = ({dictionary, value, onChange}) => {\r\n\r\n    return(\r\n        <DropdownSelector value={value} onChange={e => onChange(e.target.value)}>\r\n            <option value={''}> - wybierz składnik z listy - </option>\r\n            {dictionary.map(item => (<option key={item.id} value={item.id}>{item.name} [{getUnitName(item.unit)}]</option>))}\r\n        </DropdownSelector>\r\n    )\r\n}\r\n\r\nIngredientSelector.propTypes = {\r\n    dictionary: PropTypes.array.isRequired,\r\n    value: PropTypes.string.isRequired,\r\n    onChange: PropTypes.func.isRequired,\r\n}\r\n\r\nconst RecipeIngredientPanel = ({no, dictionary, initialValues, onDelete, onUpdate}) => {\r\n    const [modified, setModified] = useState(false)\r\n    const [deleteModalIsOpen, setDeleteModalIsOpen] = useState(false)\r\n    const [ingredientId, setIngredientId] = useState(initialValues.id)\r\n    const [value, setValue] = useState(initialValues.value)\r\n\r\n    const unitConfig = getUnitConfig(dictionary, ingredientId)\r\n\r\n    const onSaveChanges = () => {\r\n        onUpdate(no - 1, getIngredient(dictionary, ingredientId), value)\r\n        setModified(false)\r\n    }\r\n    const onIngredientChange = v => {\r\n        setValue(0)\r\n        setIngredientId(v)\r\n        setModified(true)\r\n    }\r\n    const onTimerChange = v => {\r\n        setValue(v)\r\n        setModified(true)\r\n    }\r\n\r\n    return(\r\n        <Container highlight={modified}>\r\n            <Title>Składnik nr {no}</Title>\r\n            {!modified && <CornerButton variant={'danger'} size={'sm'} onClick={() => setDeleteModalIsOpen(true)}><FontAwesomeIcon icon={faTrash}/></CornerButton>}\r\n            {modified && <CornerButton variant={'success'} size={'sm'} onClick={onSaveChanges}><FontAwesomeIcon icon={faCheck}/></CornerButton>}\r\n            <IngredientSelector onChange={onIngredientChange} dictionary={dictionary} value={ingredientId} />\r\n            {ingredientId !== '' && unitConfig.code !== 'UNKNOW' && <NumberPicker value={value} onChange={onTimerChange} {...unitConfig} />}\r\n            <ModalWindow show={deleteModalIsOpen}\r\n                         onSubmit={() => onDelete(no - 1)}\r\n                         onCancel={() => setDeleteModalIsOpen(false)}\r\n                         text={'Czy chcesz usunąć ten składnik? UWAGA: ta operacja zresetuje wszystkie niezapisane dane z pozostałych składników!'} />\r\n        </Container>\r\n    )\r\n}\r\n\r\nRecipeIngredientPanel.propTypes = {\r\n    no: PropTypes.number.isRequired,\r\n    dictionary: PropTypes.array.isRequired,\r\n    initialValues: PropTypes.object.isRequired,\r\n    onDelete: PropTypes.func.isRequired,\r\n    onUpdate: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default RecipeIngredientPanel\r\n","import firebase from '../firebase'\r\nimport { getIngredientsFromRecipe } from './recipes'\r\n\r\nconst INGREDIENTS_COLL = 'ingredients'\r\n\r\nexport const getIngredients = () => {\r\n    return firebase.firestore().collection(INGREDIENTS_COLL).get()\r\n        .then(collection => {\r\n            return collection.docs\r\n                .map(recipe => ({ id: recipe.id, ...recipe.data() }))\r\n                .sort((a, b) => {\r\n                    if(a.name < b.name) return -1\r\n                    if(a.name > b.name) return 1\r\n                    return 0\r\n                })\r\n        })\r\n        .catch(err => alert(`GET ERROR ${err.code}`))\r\n}\r\n\r\nexport const deleteIngredient = ingredientId => {\r\n    return firebase.firestore().collection(INGREDIENTS_COLL).doc(ingredientId).delete()\r\n        .catch(err => alert(`DELETE ERROR ${err.code}`))\r\n}\r\n\r\nexport const addIngredient = (name, unit) => {\r\n    return firebase.firestore().collection(INGREDIENTS_COLL).add({ name, unit })\r\n        .catch(err => alert(`ADD ERROR ${err.code}`))\r\n}\r\n\r\nexport const getIngredientsFromSystemAndRecipe = recipeId => {\r\n    const fromRecipe = getIngredientsFromRecipe(recipeId)\r\n    const fromSystem = getIngredients()\r\n    return Promise.all([fromRecipe, fromSystem])\r\n        .then(data => ({\r\n            recipe: data[0],\r\n            dictionary: data[1]\r\n        }))\r\n}\r\n","import React from 'react'\r\nimport { Button } from 'react-bootstrap'\r\nimport styled from 'styled-components'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faChevronLeft, faPlusCircle } from '@fortawesome/free-solid-svg-icons'\r\nimport { useParams } from 'react-router-dom'\r\nimport CardTitle from '../components/CardTitle'\r\nimport DataLoader from '../components/DataLoader'\r\nimport RecipeIngredientPanel from '../components/RecipeIngredientPanel'\r\nimport { updateIngredients } from '../firebase/firestore/recipes'\r\nimport { getIngredientsFromSystemAndRecipe } from '../firebase/firestore/ingredients'\r\n\r\nconst Container = styled.div`\r\n  text-align: center;\r\n  padding: 10px;\r\n  svg { margin: 0 4px; }\r\n`\r\n\r\nconst NewItemButton = styled(Button)`\r\n  margin-top: 10px;\r\n  width: 200px;\r\n`\r\n\r\nconst cloneObject = obj => JSON.parse(JSON.stringify(obj))\r\n\r\nconst IngredientEditor = () => {\r\n    const { category, recipe } = useParams()\r\n\r\n    const deleteItem = (idx, data, dataSetter) => {\r\n        const newList = cloneObject(data)\r\n        newList.recipe.splice(idx, 1)\r\n        dataSetter(newList)\r\n        updateIngredients(recipe, newList.recipe)\r\n    }\r\n    const addNewItem = (data, dataSetter) => {\r\n        const newList = cloneObject(data)\r\n        newList.recipe.push({ id: '', name: '', unit: '', value: 0 })\r\n        dataSetter(newList)\r\n        updateIngredients(recipe, newList.recipe)\r\n    }\r\n    const updateItem = (idx, ingredient, value, data, dataSetter) => {\r\n        const newList = cloneObject(data)\r\n        newList.recipe[idx] = { id: ingredient.id, name: ingredient.name, unit: ingredient.unit, value }\r\n        dataSetter(newList)\r\n        updateIngredients(recipe, newList.recipe)\r\n    }\r\n\r\n    return(\r\n        <>\r\n            <CardTitle leftButton={{ link: `/recipes/${category}/${recipe}`, variant: `light`, icon: faChevronLeft }}>\r\n                Edycja składników\r\n            </CardTitle>\r\n            <Container>\r\n                <DataLoader noPreventEmptyList\r\n                            loader={() => getIngredientsFromSystemAndRecipe(recipe)}\r\n                            viewer={(data, dataSetter) => (\r\n                                <>\r\n                                    {\r\n                                        data.recipe.map((item, idx) => (\r\n                                            <RecipeIngredientPanel key={idx+item.name+item.unit+item.value}\r\n                                                                   initialValues={item}\r\n                                                                   no={idx+1}\r\n                                                                   dictionary={data.dictionary}\r\n                                                                   onDelete={idx => deleteItem(idx, data, dataSetter)}\r\n                                                                   onUpdate={(idx, ingredient, value) => updateItem(idx, ingredient, value, data, dataSetter)} />\r\n                                        ))\r\n                                    }\r\n                                    <NewItemButton variant={'success'} onClick={() => addNewItem(data, dataSetter)}>\r\n                                        <FontAwesomeIcon icon={faPlusCircle} /> Nowy składnik\r\n                                    </NewItemButton>\r\n                                </>\r\n                            )} />\r\n            </Container>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default IngredientEditor\r\n","import React, { useState } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport styled from 'styled-components'\r\nimport { Button } from 'react-bootstrap'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faTrash, faCheck } from '@fortawesome/free-solid-svg-icons'\r\nimport NumberPicker from './NumberPicker'\r\nimport ModalWindow from './ModalWindow'\r\n\r\nconst Container = styled.div`\r\n  background-color: ${props => props.highlight ? '#ffa14d' : '#ececec'};\r\n  border-radius: 4px;\r\n  margin-bottom: 5px;\r\n  padding: 10px;\r\n  position: relative;\r\n`\r\n\r\nconst Title = styled.div`\r\n  color: #000;\r\n  line-height: 30px;\r\n  margin-bottom: 6px;\r\n`\r\n\r\nconst Textarea = styled.textarea`\r\n  width: 100%;\r\n  min-height: 100px;\r\n`\r\n\r\nconst TextareaCounter = styled.div`\r\n  color: #000;\r\n  font-size: 0.8rem;\r\n  text-align: right;\r\n  margin-right: 8px;\r\n  margin-bottom: 10px;\r\n`\r\n\r\nconst CornerButton = styled(Button)`\r\n  position: absolute;\r\n  top: 6px;\r\n  right: 10px;\r\n  min-width: 50px;\r\n  text-align: center;\r\n`\r\n\r\nconst RecipeStepPanel = ({no, stepCount, initialValues, onDelete, onUpdate}) => {\r\n    const [modified, setModified] = useState(false)\r\n    const [deleteModalIsOpen, setDeleteModalIsOpen] = useState(false)\r\n    const [text, setText] = useState(initialValues.text)\r\n    const [timer, setTimer] = useState(initialValues.timer)\r\n\r\n    const onSaveChanges = () => {\r\n        onUpdate(no - 1, text, timer)\r\n        setModified(false)\r\n    }\r\n    const onTextChange = e => {\r\n        setText(e.target.value)\r\n        setModified(true)\r\n    }\r\n    const onTimerChange = v => {\r\n        setTimer(v)\r\n        setModified(true)\r\n    }\r\n\r\n    return(\r\n        <Container highlight={modified}>\r\n            <Title>Krok {no} z {stepCount}</Title>\r\n            {!modified && <CornerButton variant={'danger'} size={'sm'} onClick={() => setDeleteModalIsOpen(true)}><FontAwesomeIcon icon={faTrash}/></CornerButton>}\r\n            {modified && <CornerButton variant={'success'} size={'sm'} onClick={onSaveChanges}><FontAwesomeIcon icon={faCheck}/></CornerButton>}\r\n            <Textarea value={text} onChange={onTextChange} maxLength={400} />\r\n            <TextareaCounter>{text.length}/400</TextareaCounter>\r\n            <NumberPicker value={timer}\r\n                          onChange={onTimerChange}\r\n                          step={[1, 10]}\r\n                          maxValue={180}\r\n                          prefix={'Timer: '}\r\n                          label={' min'}\r\n                          zeroCustomText={'Timer wył.'} />\r\n            <ModalWindow show={deleteModalIsOpen}\r\n                         onSubmit={() => onDelete(no - 1)}\r\n                         onCancel={() => setDeleteModalIsOpen(false)}\r\n                         text={'Czy chcesz usunąć ten krok? UWAGA: ta operacja zresetuje wszystkie niezapisane dane z pozostałych kroków!'} />\r\n        </Container>\r\n    )\r\n}\r\n\r\nRecipeStepPanel.propTypes = {\r\n    no: PropTypes.number.isRequired,\r\n    stepCount: PropTypes.number.isRequired,\r\n    initialValues: PropTypes.object.isRequired,\r\n    onDelete: PropTypes.func.isRequired,\r\n    onUpdate: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default RecipeStepPanel\r\n","import React from 'react'\r\nimport { Button } from 'react-bootstrap'\r\nimport styled from 'styled-components'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faChevronLeft, faPlusCircle } from '@fortawesome/free-solid-svg-icons'\r\nimport { useParams } from 'react-router-dom'\r\nimport CardTitle from '../components/CardTitle'\r\nimport DataLoader from '../components/DataLoader'\r\nimport RecipeStepPanel from '../components/RecipeStepPanel'\r\nimport { getStepsFromRecipe, updateSteps } from '../firebase/firestore/recipes'\r\n\r\nconst Container = styled.div`\r\n  text-align: center;\r\n  padding: 10px;\r\n  svg { margin: 0 4px; }\r\n`\r\n\r\nconst NewItemButton = styled(Button)`\r\n  margin-top: 10px;\r\n  width: 200px;\r\n`\r\n\r\nconst RecipeEditor = () => {\r\n    const { category, recipe } = useParams()\r\n\r\n    const deleteItem = (idx, data, dataSetter) => {\r\n        const newList = [...data]\r\n        newList.splice(idx, 1)\r\n        dataSetter(newList)\r\n        updateSteps(recipe, newList)\r\n    }\r\n    const addNewItem = (data, dataSetter) => {\r\n        const newList = [...data, { text: '', timer: 0 }]\r\n        dataSetter(newList)\r\n        updateSteps(recipe, newList)\r\n    }\r\n    const updateItem = (idx, text, timer, data, dataSetter) => {\r\n        const newList = [...data]\r\n        newList[idx] = { text, timer }\r\n        dataSetter(newList)\r\n        updateSteps(recipe, newList)\r\n    }\r\n\r\n    return(\r\n        <>\r\n            <CardTitle leftButton={{ link: `/recipes/${category}/${recipe}`, variant: `light`, icon: faChevronLeft }}>\r\n                Edycja kroków\r\n            </CardTitle>\r\n            <Container>\r\n                <DataLoader noPreventEmptyList\r\n                            loader={() => getStepsFromRecipe(recipe)}\r\n                            viewer={(data, dataSetter) => (\r\n                    <>\r\n                        {\r\n                            data.map((item, idx) => (\r\n                                <RecipeStepPanel key={idx+item.text+item.timer}\r\n                                                 initialValues={item}\r\n                                                 stepCount={data.length}\r\n                                                 no={idx+1}\r\n                                                 onDelete={idx => deleteItem(idx, data, dataSetter)}\r\n                                                 onUpdate={(idx, text, timer) => updateItem(idx, text, timer, data, dataSetter)} />\r\n                            ))\r\n                        }\r\n                        <NewItemButton variant={'success'} onClick={() => addNewItem(data, dataSetter)}>\r\n                            <FontAwesomeIcon icon={faPlusCircle} /> Nowa pozycja\r\n                        </NewItemButton>\r\n                    </>\r\n                )} />\r\n            </Container>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default RecipeEditor\r\n","import React from 'react'\r\nimport { getShoppingList } from '../firebase/firestore/shoppingList'\r\nimport firebase from '../firebase/firebase'\r\nimport CardTitle from '../components/CardTitle'\r\nimport DataLoader from '../components/DataLoader'\r\nimport IngredientList from '../components/IngredientList'\r\n\r\nconst ShoppingList = () => {\r\n    const uid = firebase.auth().currentUser.uid\r\n\r\n    return(\r\n        <>\r\n            <CardTitle>Lista zakupów</CardTitle>\r\n            <DataLoader loader={() => getShoppingList(uid)} viewer={data => (\r\n                <>\r\n                    <IngredientList list={data} deleteOption clearOption exportOption manualAdder />\r\n                </>\r\n            )}/>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ShoppingList\r\n","import React, { useState } from 'react'\r\nimport { Button, Form } from 'react-bootstrap'\r\nimport styled from 'styled-components'\r\nimport config from '../config'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faChevronRight } from '@fortawesome/free-solid-svg-icons'\r\nimport { useHistory } from 'react-router-dom'\r\nimport CardTitle from '../components/CardTitle'\r\nimport DataLoader from '../components/DataLoader'\r\nimport { getAllRecipes } from '../firebase/firestore/recipes'\r\n\r\nconst SearchGroup = styled.div`\r\n  padding: 10px;\r\n  i {\r\n    display: block;\r\n    text-align: center;\r\n  }\r\n`\r\n\r\nconst SearchResultButton = styled(Button)`\r\n  position: relative;\r\n  text-align: left;\r\n  line-height: 40px;\r\n  margin-bottom: 12px;\r\n`\r\n\r\nconst ButtonArrowIcon = styled(FontAwesomeIcon)`\r\n  position: absolute;\r\n  right: 20px;\r\n  margin-top: 20px;\r\n  transform: translateY(-50%);\r\n`\r\n\r\nconst getCategoryName = categoryCode => {\r\n    const category = config.categories.find(i => i.code === categoryCode)\r\n    return category ? category.name : ''\r\n}\r\n\r\nconst SearchResultPanels = ({recipes, searchQuery, historyHook}) => {\r\n    searchQuery = searchQuery.toLowerCase()\r\n\r\n    // WARNING:\r\n    // THIS SEARCH ENGINE CONTAINS BAD PRACTISE WITH CLIENT-SIDE FILTERING BECAUSE FIRESTORE\r\n    // DOESN'T SUPPORT NATIVE FULL-TEXT SEARCHING - DOING IT PROPERLY REQUIRES USING EXTERNAL\r\n    // SEARCH ENGINE LIKE ALGOLIA BUT I DON'T WANT COMPLICATE TO MUCH THIS SIMPLE PROJECT\r\n\r\n    const filteredRecipes = recipes\r\n        .filter(i => i.name.toLowerCase().includes(searchQuery)).map(recipe => (\r\n        <SearchResultButton key={recipe.id}\r\n                            variant={'light'}\r\n                            block\r\n                            onClick={() => historyHook.push(`/recipes/${recipe.category}/${recipe.id}`)}>\r\n            {getCategoryName(recipe.category)}: {recipe.name}\r\n            <ButtonArrowIcon icon={faChevronRight} />\r\n        </SearchResultButton>\r\n    ))\r\n    if(filteredRecipes.length === 0) {\r\n        return <i>nie znaleziono przepisów o takiej nazwie</i>\r\n    }else{\r\n        return filteredRecipes\r\n    }\r\n}\r\n\r\nconst Search = () => {\r\n    const [searchText, setSearchText] = useState('')\r\n    const history = useHistory()\r\n\r\n    return(\r\n        <>\r\n            <CardTitle>Wyszukiwarka</CardTitle>\r\n            <SearchGroup>\r\n                <Form.Control type={'text'}\r\n                              value={searchText}\r\n                              onChange={e => setSearchText(e.target.value)} placeholder={'Wpisz szukaną frazę (min. 3 znaki)'}\r\n                              maxLength={'30'} />\r\n            </SearchGroup>\r\n            <SearchGroup>\r\n                <DataLoader noPreventEmptyList loader={getAllRecipes} viewer={data => (\r\n                    searchText.length > 3 && <SearchResultPanels searchQuery={searchText} recipes={data} historyHook={history} />\r\n                )} />\r\n            </SearchGroup>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Search\r\n","import React, { useState } from 'react'\r\nimport { Button, Dropdown, Form, InputGroup } from 'react-bootstrap'\r\nimport styled from 'styled-components'\r\nimport config from '../config'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faTrash } from '@fortawesome/free-solid-svg-icons'\r\nimport CardTitle from '../components/CardTitle'\r\nimport ModalWindow from '../components/ModalWindow'\r\nimport { getIngredients, deleteIngredient, addIngredient } from '../firebase/firestore/ingredients'\r\nimport DataLoader from '../components/DataLoader'\r\n\r\nconst Container = styled.div`\r\n  padding: 10px;\r\n`\r\n\r\nconst ItemButton = styled(Button)`\r\n  position: relative;\r\n  text-align: left;\r\n  line-height: 40px;\r\n  margin-bottom: 12px;\r\n`\r\n\r\nconst TrashIcon = styled(FontAwesomeIcon)`\r\n  position: absolute;\r\n  right: 20px;\r\n  margin-top: 20px;\r\n  transform: translateY(-50%);\r\n`\r\n\r\nconst IngredientAdder = ({ onSubmit }) => {\r\n    const [name, setName] = useState('')\r\n    const [dropdownIsOpen, setDropdownIsOpen] = useState(false)\r\n    const [unitType, setUnitType] = useState(config.ingredientUtils[0].code)\r\n    const adder = () => {\r\n        addIngredient(name, unitType)\r\n            .then(() => {\r\n                setName('')\r\n                setUnitType(config.ingredientUtils[0].code)\r\n                if(onSubmit) onSubmit()\r\n            })\r\n    }\r\n    return(\r\n        <Container>\r\n            <InputGroup style={{marginBottom: '10px'}}>\r\n                <Form.Control type={'text'}\r\n                              value={name}\r\n                              onChange={e => setName(e.target.value)} placeholder={'Nazwa składnika'}\r\n                              maxLength={'30'} />\r\n                <InputGroup.Append>\r\n                    <Button variant={'success'}\r\n                         onClick={adder}\r\n                         disabled={name.length < 3}>\r\n                        Dodaj\r\n                    </Button>\r\n                </InputGroup.Append>\r\n            </InputGroup>\r\n            <Dropdown isOpen={dropdownIsOpen} toggle={() => setDropdownIsOpen(v => !v)}>\r\n                <Dropdown.Toggle variant={'light'} caret block>\r\n                    Jednostka: {config.ingredientUtils.find(unit => unit.code === unitType).name}\r\n                </Dropdown.Toggle>\r\n                <Dropdown.Menu>\r\n                    {\r\n                        config.ingredientUtils.map(unit => (\r\n                            <Dropdown.Item key={unit.code}\r\n                                           onClick={() => setUnitType(unit.code)}\r\n                                           disabled={unit.code === unitType}>\r\n                                {unit.name}\r\n                            </Dropdown.Item>\r\n                        ))\r\n                    }\r\n                </Dropdown.Menu>\r\n            </Dropdown>\r\n        </Container>\r\n    )\r\n}\r\n\r\nconst IngredientBrowser = () => {\r\n    const [selectedId, setSelectedId] = useState(null)\r\n    const [refreshFlag, setRefreshFlag] = useState(false)\r\n    const deleteItem = () => {\r\n        deleteIngredient(selectedId)\r\n            .then(() => {\r\n                setSelectedId(null)\r\n                setRefreshFlag(f => !f)\r\n            })\r\n    }\r\n    return(\r\n        <>\r\n            <CardTitle>Składniki</CardTitle>\r\n            <IngredientAdder onSubmit={() => setRefreshFlag(f => !f)} />\r\n            <DataLoader refreshFlag={refreshFlag} loader={getIngredients} viewer={data => (\r\n                <Container>\r\n                    {\r\n                        data.map(item => (\r\n                            <ItemButton key={item.id}\r\n                                        variant={'light'}\r\n                                        block\r\n                                        onClick={() => setSelectedId(item.id)}>\r\n                                {item.name} [{config.ingredientUtils.find(unit => unit.code === item.unit).name}]\r\n                                <TrashIcon icon={faTrash} style={{color: '#d00000'}} />\r\n                            </ItemButton>\r\n                        ))\r\n                    }\r\n                </Container>\r\n            )} />\r\n            <ModalWindow show={selectedId != null}\r\n                         onSubmit={deleteItem}\r\n                         onCancel={() => setSelectedId(null)} />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default IngredientBrowser\r\n","import firebase from '../firebase'\r\n\r\nconst RECIPES_COLL = 'recipes'\r\nconst INGREDIENTS_COLL = 'ingredients'\r\nconst SHOPPING_LIST_COLL = 'shoppingList'\r\n\r\nconst exportDataFromCollection = (collectionName, docName = '') => {\r\n    if(docName === '') {\r\n        return firebase.firestore().collection(collectionName).get()\r\n            .then(collection => (\r\n                JSON.stringify(collection.docs.map(doc => ({ id: doc.id, data: doc.data() })))\r\n            ))\r\n            .catch(err => alert(`EXPORT ERROR ${err.code}`))\r\n    }else{\r\n        return firebase.firestore().collection(collectionName).doc(docName).get()\r\n            .then(doc => (\r\n                JSON.stringify({ id: doc.id, data: doc.data() })\r\n            ))\r\n            .catch(err => alert(`EXPORT ERROR ${err.code}`))\r\n    }\r\n}\r\n\r\nexport const exportRecipes = () => exportDataFromCollection(RECIPES_COLL)\r\n\r\nexport const exportIngredients = () => exportDataFromCollection(INGREDIENTS_COLL)\r\n\r\nexport const exportShopingList = uid => exportDataFromCollection(SHOPPING_LIST_COLL, uid)\r\n","import React, {useContext, useState} from 'react'\r\nimport styled from 'styled-components'\r\nimport {Button} from 'react-bootstrap'\r\nimport firebase from 'firebase'\r\nimport {UserContext} from '../firebase/UserContext'\r\nimport {\r\n    exportRecipes,\r\n    exportIngredients,\r\n    exportShopingList\r\n} from '../firebase/firestore/databaseExports'\r\n\r\nconst Panel = styled.div`\r\n  text-align: center;\r\n  margin: 50px 20px 0 20px;\r\n`\r\n\r\nconst Btn = styled(Button)`\r\nmargin-top: 25px;\r\n`\r\n\r\nconst logout = () => {\r\n    firebase.auth().signOut().catch(err => alert(`AUTH ERROR: ${err}`))\r\n}\r\n\r\nconst ProfilePage = () => {\r\n    const user = useContext(UserContext)\r\n    const [exportData, setExportData] = useState(null)\r\n    const [fetchingInProgress, setFetchingInProgress] = useState(false)\r\n    const [fileName, setFileName] = useState('exportdata')\r\n    const fetchData = typeID => {\r\n        setExportData(null)\r\n        setFetchingInProgress(true)\r\n        switch (typeID) {\r\n            case 'RECIPES':\r\n                setFileName('RecipesDataExport')\r\n                exportRecipes().then(data => setExportData(data))\r\n                break\r\n            case 'INGREDIENTS':\r\n                setFileName('IngredientsDataExport')\r\n                exportIngredients().then(data => setExportData(data))\r\n                break\r\n            case 'SHOPINGLIST':\r\n                setFileName('ShopingListDataExport')\r\n                exportShopingList(user.uid).then(data => setExportData(data))\r\n                break\r\n            default:\r\n                setFileName('exportdata')\r\n                setExportData(null)\r\n        }\r\n    }\r\n\r\n    const clickExportRecipes = () => fetchData('RECIPES')\r\n    const clickExportIngredients = () => fetchData('INGREDIENTS')\r\n    const clickExportShopingList = () => fetchData('SHOPINGLIST')\r\n\r\n    const downloadExportData = () => {\r\n        const data = 'data:text/json;charset=utf-8,' + encodeURIComponent(exportData.toString())\r\n        const downloadAnchorNode = document.createElement('a')\r\n        downloadAnchorNode.setAttribute('href', data)\r\n        downloadAnchorNode.setAttribute('download', `${fileName}.json`);\r\n        document.body.appendChild(downloadAnchorNode)\r\n        downloadAnchorNode.click()\r\n        downloadAnchorNode.remove()\r\n        setExportData(null)\r\n        setFetchingInProgress(false)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Panel>\r\n                <b>Zalogowano jako:</b><br />{user.displayName}<br/>{user.email}\r\n                <Btn variant={'danger'} block onClick={logout}>Wyloguj z systemu</Btn>\r\n            </Panel>\r\n            <Panel>\r\n                <Btn variant={'light'} block onClick={clickExportRecipes}>Eksportuj przepisy</Btn>\r\n                <Btn variant={'light'} block onClick={clickExportIngredients}>Eksportuj składniki</Btn>\r\n                <Btn variant={'light'} block onClick={clickExportShopingList}>Eksportuj listę zakupów</Btn>\r\n                {\r\n                    fetchingInProgress\r\n                    &&\r\n                    <Btn variant={'warning'}\r\n                         block\r\n                         onClick={downloadExportData}\r\n                         style={{marginTop: '20px'}}\r\n                         disabled={exportData === null}>\r\n                        {exportData === null ? 'Pobieranie...' : 'Pobierz plik z danymi'}\r\n                    </Btn>\r\n                }\r\n            </Panel>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ProfilePage\r\n","import CategoryBrowser from './views/CategoryBrowser'\r\nimport RecipeBrowser from './views/RecipeBrowser'\r\nimport RecipePreview from './views/RecipePreview'\r\nimport Cooking from './views/Cooking'\r\nimport RecipeEditor from './views/RecipeEditor'\r\nimport IngredientEditor from './views/IngredientEditor'\r\nimport StepEditor from './views/StepEditor'\r\nimport ShoppingList from './views/ShoppingList'\r\nimport Search from './views/Search'\r\nimport IngredientBrowser from './views/IngredientBrowser'\r\nimport ProfilePage from './views/ProfilePage'\r\n\r\nexport default [\r\n    { path: '/recipes', exact: true, name: 'Kategorie przepisów', component: CategoryBrowser },\r\n    { path: '/recipes/:category', exact: true, name: 'Przepisy', component: RecipeBrowser },\r\n    { path: '/recipes/:category/add', exact: true, name: 'Nowy przepis', component: RecipeEditor },\r\n    { path: '/recipes/:category/:recipe', exact: true, name: 'Podgląd przepisu', component: RecipePreview },\r\n    { path: '/recipes/:category/:recipe/cooking', exact: true, name: 'Tryb gotowania', component: Cooking },\r\n    { path: '/recipes/:category/:recipe/edit-recipe', exact: true, name: 'Edycja przepisu', component: RecipeEditor },\r\n    { path: '/recipes/:category/:recipe/edit-ingredients', exact: true, name: 'Edycja składników przepisu', component: IngredientEditor },\r\n    { path: '/recipes/:category/:recipe/edit-steps', exact: true, name: 'Edycja kroków przepisu', component: StepEditor },\r\n    { path: '/search', exact: true, name: 'Lista zakupów', component: Search },\r\n    { path: '/shoping-list', exact: true, name: 'Lista zakupów', component: ShoppingList },\r\n    { path: '/ingredients', exact: true, name: 'Składniki', component: IngredientBrowser },\r\n    { path: '/profile', exact: true, name: 'Profil', component: ProfilePage },\r\n]\r\n","import React, {useContext} from 'react'\nimport {\n  HashRouter,\n  Switch,\n  Route,\n  Redirect\n} from 'react-router-dom'\n import LoginPage from './views/LoginPage'\n import Layout from './components/Layout'\n import routes from './routes'\nimport {UserContext} from './firebase/UserContext'\n\nconst PrivateRoute = () => {\n    const authorized = useContext(UserContext)\n    if(authorized) {\n        return (\n            <Layout>\n              <Switch>\n                {\n                  routes.map((route, idx) => (\n                      <Route key={idx}\n                             path={route.path}\n                             exact={route.exact}\n                             name={route.name}\n                             render={props => (\n                                 <route.component {...props} />\n                             )} />\n                  ))\n                }\n              </Switch>\n            </Layout>\n        )\n    }else{\n        return (\n            <Redirect to={'/'}/>\n        )\n    }\n}\n\nconst App = () => (\n    <HashRouter>\n      <React.Suspense fallback={() => <span>Loading...</span>}>\n        <Switch>\n          <Route exact path=\"/\" name=\"Login Page\" render={props => <LoginPage {...props} />} />\n          <PrivateRoute/>\n        </Switch>\n      </React.Suspense>\n    </HashRouter>\n)\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport './index.css'\nimport UserProvider from './firebase/UserContext'\n\nReactDOM.render(\n  <React.StrictMode>\n    <UserProvider>\n        <App />\n    </UserProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}